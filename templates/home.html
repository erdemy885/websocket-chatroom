{% extends 'base.html' %}
{% block content %}
<div class="chat-container">
    <form method="post" class="chat-form">
        <h3 class="form-title">Join or Create a Chat Room</h3>
        
        <div class="form-group">
            <label for="name">Name:</label>
            <input 
                type="text" 
                id="name" 
                name="name" 
                placeholder="Enter your name" 
                value="{{ name }}" 
                required 
            />
        </div>
        
        <div class="form-group room-actions">
            <input 
                type="text" 
                id="room-code" 
                name="code" 
                placeholder="Room Code" 
                value="{{ code }}" 
            />
            <button type="submit" name="join" class="btn join-btn">Join Room</button>
        </div>
        
        <button type="submit" name="create" class="btn create-btn">Create Room</button>
        
        {% if error %}
        <div class="error-message">
            <ul>
                <li>{{ error }}</li>
            </ul>
        </div>
        {% endif %}
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const nameField = document.getElementById('name');
        const roomCodeField = document.getElementById('room-code');
        
        // Autofocus the name input field on page load
        nameField.focus();

        // Example: Add event listener for validation or future logic
        roomCodeField.addEventListener('input', () => {
            if (roomCodeField.value.length > 6) {
                alert('Room code should not exceed 6 characters.');
                roomCodeField.value = roomCodeField.value.slice(0, 6); // Truncate input
            }
        });
    });
</script>
{% endblock %}
